<!-- Header banner con logo de la universidad -->
<img 
  src="images/usco.svg" 
  alt="Universidad Surcolombiana" 
  class="w-full h-auto"
  onerror="this.style.display='none'; this.nextElementSibling.style.display='block'"
/>
<div style="display:none; color:red; font-weight:bold; padding: 10px;">LOGO NO CARGA - USCO</div>

<!-- Botones principales -->
<section class="py-8">
  <div class="container mx-auto px-4">
    <p class="text-center text-black text-2xl font-usco mb-6">
      <strong>Bienvenido(a) apreciado(a) aspirante a la Universidad Surcolombiana, <br>reciba un cordial saludo.</strong>
    </p>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-6xl mx-auto">
      <a href="https://usco.edu.co/inscripciones-2025-2/documentos/ACUERDO-CA-004-DE-2025-CONSEJO-ACADEMICO.pdf" target="_blank" class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl text-center block">
        Acuerdo CA Número 004 del 25 de Marzo de 2025
      </a>
      <button (click)="showTermsDialog()" class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl text-center cursor-pointer">
        Términos de Referencia Legal del Proceso de Admisiones
      </button>
      <a href="https://www.usco.edu.co/es/faq/admisiones/" target="_blank" class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl flex items-center justify-center">
        Preguntas Frecuentes
      </a>
    </div>
    
    <!-- Botón de Política de Gratuidad -->
    <div class="max-w-6xl mx-auto mt-8">
      <button (click)="showGratuidadDialog()" class="w-full bg-usco-gris-pale border border-usco-gris-lighter rounded-lg p-6 cursor-pointer hover:shadow-md transition-shadow duration-200 text-left flex items-center">
        <div class="flex-1">
          <h3 class="text-lg font-usco-condensed-bold text-usco-vino mb-3">
            POLÍTICA DE GRATUIDAD EN LA MATRÍCULA
          </h3>
          <p class="text-usco-gris-dark font-usco">
            La Política de Gratuidad se aplica conforme el Reglamento Operativo comunicado por el Ministerio de Educación Nacional
          </p>
        </div>
        <div class="ml-4 flex-shrink-0">
          <img src="images/hacer-clic.png" alt="Hacer clic" class="w-8 h-8 object-contain" style="filter: brightness(0) saturate(100%);">
        </div>
      </button>
    </div>
  </div>
</section>


<!-- Banner principal tipo botón -->
<section class="container mx-auto px-4 py-8">
  <div class="max-w-5xl mx-auto">
    <div class="rounded-3xl shadow-xl">
      <img 
        src="images/banner-principal.png" 
        alt="Banner Principal - Proceso de Matrícula"
        class="w-full h-auto rounded-3xl object-cover"
        style="height: auto;"
      />
    </div>
  </div>
</section>

<!-- Pasos de matrícula -->
<main class="container mx-auto px-4 py-12">
  <div class="max-w-6xl mx-auto">
    <div class="relative">
      <div *ngFor="let step of steps; let isLast = last; let isFirst = first" class="relative">
        <!-- Línea vertical conectora para cada paso (excepto el último) - solo desktop -->
        <div *ngIf="!isLast" class="absolute left-6 w-0.5 bg-usco-ocre-dark hidden md:block" 
             [ngStyle]="isFirst ? {top: '62px', height: 'calc(100% + 18px)'} : {top: '48px', height: 'calc(100% + 48px)'}">
        </div>
        <!-- Estructura uniforme para todos los pasos -->
        <div class="flex items-center mb-8">
          <!-- Número fuera del banner -->
          <div class="w-8 h-8 md:w-12 md:h-12 text-white rounded-full flex items-center justify-center font-bold text-sm md:text-lg mr-4 md:mr-12 flex-shrink-0 relative z-10 bg-usco-vino">
            {{ step.number }}
          </div>
          
          <!-- Flecha - solo en desktop -->
          <div class="hidden md:flex text-usco-vino text-6xl mr-16 flex-shrink-0 w-8 items-center justify-center">
            →
          </div>
          
          <!-- Banner para todos los pasos con imagen -->
          <div class="rounded-3xl shadow-xl cursor-pointer transform transition-all duration-300 hover:scale-105 hover:shadow-2xl flex-1"
            (click)="showDialog(step)"
          >
            <img 
              [src]="'images/paso-' + step.number + '.png'" 
              [alt]="step.title"
              class="w-full h-auto rounded-3xl object-cover"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Modal personalizado con TailwindCSS -->
<div *ngIf="visible()" class="fixed inset-0 z-50 flex items-center justify-center" [ngClass]="closing() ? 'animate-fadeOut' : 'animate-fadeIn'">
  <!-- Fondo opacado -->
  <div class="modal-overlay" [ngClass]="closing() ? 'animate-fadeOut' : 'animate-fadeIn'" (click)="hideDialog()"></div>
  
  <!-- Modal -->
  <div class="relative bg-white rounded-lg shadow-xl w-[95vw] max-w-[1700px] h-[90vh] flex flex-col" [ngClass]="closing() ? 'animate-scaleOut' : 'animate-scaleIn'">
    <!-- Header -->
    <div class="bg-usco-vino text-white px-6 py-4">
      <h3 class="text-lg font-usco-condensed-bold">
        {{ selectedStep()?.title || '' }}
      </h3>
    </div>
    
    <!-- Contenido -->
    <div class="overflow-y-auto flex-1" *ngIf="selectedStep()">
      <!-- Solo mostrar PDFs para el paso 1 y paso 3 -->
      <div *ngIf="(selectedStep()!.number === 1 || selectedStep()!.number === 3) && selectedStep()!.pdfs && selectedStep()!.pdfs!.length > 0" class="p-4">
        <!-- Listado horizontal de sedes -->
        <div class="mb-6">
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <button 
              *ngFor="let pdf of selectedStep()!.pdfs!; let i = index"
              (click)="selectPdf(i, pdf.url)"
              class="sede-button p-4 rounded-lg border-2 transition-all duration-200 hover:scale-105 hover:shadow-lg"
              [ngClass]="selectedPdfIndex() === i ? 
                'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
              <div class="text-center">
                <div class="font-usco-bold text-sm">{{ pdf.name }}</div>
              </div>
            </button>
          </div>
        </div>
        
        <!-- Contenido del PDF -->
        <div *ngIf="selectedStep()!.pdfs && selectedStep()!.pdfs![selectedPdfIndex()]" class="bg-white">
          <div *ngIf="!isBrowser()" class="flex items-center justify-center h-[400px] bg-gray-100 rounded">
            <p class="text-usco-gris">Cargando visor PDF...</p>
          </div>
          
          <div *ngIf="isBrowser()">
            <!-- Visor PDF con embed simple (como en PHP) -->
            <div class="border rounded bg-white p-4">
              <!-- Embed PDF directo -->
              <embed 
                [src]="safePdfUrl()" 
                width="98%" 
                height="630" 
                type="application/pdf"
                class="rounded border" />
            </div>
          </div>
        </div>
      </div>

      <!-- Mostrar modalidades para el paso 2, 3 y paso 4 -->
      <div *ngIf="(selectedStep()!.number === 2 || selectedStep()!.number === 3 || selectedStep()!.number === 4) && selectedStep()!.modalidades && selectedStep()!.modalidades!.length > 0" class="p-4">
        <!-- Texto informativo antes de las modalidades (solo para paso 2) -->
        <div *ngIf="selectedStep()!.number === 2" class="bg-yellow-50 border-l-4 border-yellow-400 p-6 mb-6">
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">
            <a href="https://www.usco.edu.co/archivosUsuarios/16/publicacion/consejo_academico/acuerdo/acuerdo_003_de_2016.pdf" target="_blank" class="underline">
              Ver Reglamento. Lectura obligatoria.
            </a>
          </h4>
          
          <div class="space-y-4 text-usco-gris-dark font-usco">
            <p class="font-usco-bold">
              IMPORTANTE: De conformidad con lo establecido en el Acuerdo Número 003 del 12 de abril de 2016 expedido por el Consejo Académico, el estudiante que haya estado matriculado en la Universidad Surcolombiana y por alguna causal perdió el cupo en un Programa Académico de Pregrado, NO podrá inscribirse al mismo Programa, ya sea en otra jornada, en otra Sede o al mismo Programa, así haya cambiado de denominación.
            </p>
            
            <p>
              Con fundamento en el Decreto número 860 del 23 de abril de 2003 expedido por el Ministerio de Educación Nacional, la Prueba de Estado (ICFES o Saber 11) será el único documento válido para inscribirse. Recuerde que sólo se aceptan las pruebas de Estado (ICFES o Saber 11) con 10 años de vigencia, es decir, a partir del año 2016.
            </p>
          </div>
        </div>
        
        <!-- Listado horizontal de modalidades -->
        <div class="mb-6">
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <button 
              *ngFor="let modalidad of selectedStep()!.modalidades!; let i = index"
              (click)="selectModalidad(i)"
              class="sede-button p-4 rounded-lg border-2 transition-all duration-200 hover:scale-105 hover:shadow-lg"
              [ngClass]="selectedModalidadIndex() === i ? 
                'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
              <div class="text-center">
                <div class="font-usco-bold text-sm">{{ modalidad.name }}</div>
              </div>
            </button>
          </div>
        </div>
        
        <!-- Contenido de la modalidad -->
        <div *ngIf="selectedStep()!.modalidades && selectedStep()!.modalidades![selectedModalidadIndex()]" class="bg-white">
          <!-- Si la modalidad tiene PDF, mostrarlo -->
          <div *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].pdf && !isBrowser()" class="flex items-center justify-center h-[400px] bg-gray-100 rounded">
            <p class="text-usco-gris">Cargando visor PDF...</p>
          </div>
          
          <div *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].pdf && isBrowser()">
            <div class="border rounded bg-white p-4">
              <embed 
                [src]="sanitizeModalidadPdfUrl(selectedStep()!.modalidades![selectedModalidadIndex()].pdf!)" 
                width="98%" 
                height="630" 
                type="application/pdf"
                class="rounded border" />
            </div>
          </div>
          
          <!-- Si la modalidad tiene contenido de texto, mostrarlo -->
          <div *ngIf="!selectedStep()!.modalidades![selectedModalidadIndex()].pdf && selectedStep()!.modalidades![selectedModalidadIndex()].content" class="border rounded bg-white p-4">
            <div class="text-usco-gris-dark leading-relaxed font-usco space-y-4 overflow-x-auto" [innerHTML]="formatText(selectedStep()!.modalidades![selectedModalidadIndex()].content)"></div>
            
            <!-- Acordeones si existen -->
            <div *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].acordeones" class="mt-4 space-y-2">
              <div *ngFor="let acordeon of selectedStep()!.modalidades![selectedModalidadIndex()].acordeones!; let i = index" class="border border-usco-gris-lighter rounded-lg">
                <button 
                  (click)="toggleAcordeon(i)"
                  class="w-full px-4 py-3 text-left transition-colors duration-200 rounded-t-lg flex items-center justify-between"
                  [ngClass]="{
                    'bg-usco-ocre text-gray-600 rounded-lg': selectedAcordeonIndex() !== i,
                    'bg-usco-vino text-white rounded-b-none': selectedAcordeonIndex() === i
                  }"
                  style="transition: all 0.2s;"
                  (mouseenter)="onAcordeonMouseEnter($event)"
                  (mouseleave)="onAcordeonMouseLeave($event, i)">
                  <span class="font-usco-bold">{{ acordeon.titulo }}</span>
                  <span class="text-xl" [ngClass]="selectedAcordeonIndex() === i ? 'rotate-180' : 'rotate-0'" style="transition: transform 0.2s;">▼</span>
                </button>
                <div 
                  *ngIf="selectedAcordeonIndex() === i || acordeonClosing() === i" 
                  class="px-4 py-3 bg-white border-t border-usco-gris-lighter overflow-hidden"
                  [ngClass]="{
                    'animate-slideDown': selectedAcordeonIndex() === i && acordeonClosing() !== i,
                    'animate-slideUp': acordeonClosing() === i
                  }">
                  <div class="text-usco-gris-dark font-usco" [innerHTML]="formatText(acordeon.contenido)"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Para el paso 5, mostrar iconos interactivos -->
      <div *ngIf="selectedStep()!.number === 5" class="p-6">
        <div class="text-center mb-8">
          <h2 class="text-2xl font-usco-condensed-bold text-blue-900 bg-usco-ocre-pale px-6 py-4 rounded-lg border-l-4 border-usco-vino shadow-md">
            RECUERDE QUE PARA REALIZAR LA INSCRIPCIÓN Y MATRÍCULA DEBE SEGUIR OBLIGATORIAMENTE LOS SIGUIENTES PASOS
          </h2>
        </div>
        <!-- Desktop view with icons and arrows -->
        <div class="hidden md:flex items-center justify-center space-x-6">
          <!-- PIN -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('pin')">
            <img src="images/pin.png" alt="PIN" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'pin' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'pin'" />
            <img src="images/pin-hover.png" alt="PIN Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'pin'" 
                 [class.opacity-0]="activeIcon() !== 'pin'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'pin'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">→</div>
          
          <!-- Formulario Inscripción -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('formulario')">
            <img src="images/formulario-inscripcion.png" alt="Formulario Inscripción" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'formulario' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'formulario'" />
            <img src="images/formulario-inscripcion-hover.png" alt="Formulario Inscripción Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'formulario'" 
                 [class.opacity-0]="activeIcon() !== 'formulario'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'formulario'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">→</div>
          
          <!-- Estado Inscripción -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('estado')">
            <img src="images/estado-inscripcion.png" alt="Estado Inscripción" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'estado' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'estado'" />
            <img src="images/estado-inscripcion-hover.png" alt="Estado Inscripción Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'estado'" 
                 [class.opacity-0]="activeIcon() !== 'estado'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'estado'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">→</div>
          
          <!-- Admitidos -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('admitidos')">
            <img src="images/admitidos.png" alt="Admitidos" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'admitidos' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'admitidos'" />
            <img src="images/admitidos-hover.png" alt="Admitidos Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'admitidos'" 
                 [class.opacity-0]="activeIcon() !== 'admitidos'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'admitidos'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">→</div>
          
          <!-- Matrícula Financiera -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('financiera')">
            <img src="images/financiera.png" alt="Matrícula Financiera" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'financiera' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'financiera'" />
            <img src="images/financiera-hover.png" alt="Matrícula Financiera Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'financiera'" 
                 [class.opacity-0]="activeIcon() !== 'financiera'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'financiera'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">→</div>
          
          <!-- Matrícula Académica -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('academica')">
            <img src="images/academica.png" alt="Matrícula Académica" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'academica' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'academica'" />
            <img src="images/academica-hover.png" alt="Matrícula Académica Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'academica'" 
                 [class.opacity-0]="activeIcon() !== 'academica'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'academica'" />
          </div>
        </div>
        
        <!-- Mobile view with large buttons -->
        <div class="md:hidden grid grid-cols-1 gap-4 max-w-md mx-auto">
          <!-- PIN Button -->
          <button (click)="showIconInfo('pin')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'pin' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">1. PIN</div>
            <div class="text-sm mt-1 opacity-75">Generar PIN de inscripción</div>
          </button>
          
          <!-- Formulario Button -->
          <button (click)="showIconInfo('formulario')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'formulario' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">2. Formulario de Inscripción</div>
            <div class="text-sm mt-1 opacity-75">Completar formulario online</div>
          </button>
          
          <!-- Estado Button -->
          <button (click)="showIconInfo('estado')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'estado' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">3. Estado de Inscripción</div>
            <div class="text-sm mt-1 opacity-75">Consultar estado y resultados</div>
          </button>
          
          <!-- Admitidos Button -->
          <button (click)="showIconInfo('admitidos')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'admitidos' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">4. Lista de Admitidos</div>
            <div class="text-sm mt-1 opacity-75">Verificar admisión</div>
          </button>
          
          <!-- Matrícula Financiera Button -->
          <button (click)="showIconInfo('financiera')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'financiera' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">5. Matrícula Financiera</div>
            <div class="text-sm mt-1 opacity-75">Realizar pago de matrícula</div>
          </button>
          
          <!-- Matrícula Académica Button -->
          <button (click)="showIconInfo('academica')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'academica' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">6. Matrícula Académica</div>
            <div class="text-sm mt-1 opacity-75">Completar proceso académico</div>
          </button>
        </div>
        
        <!-- Panel de información del icono seleccionado -->
        <div *ngIf="selectedIconInfo()" class="mt-6 bg-white border border-usco-gris-lighter rounded-lg shadow-lg"
             [class.animate-slideInDown]="!closingIconPanel() && !openingIconPanel()"
             [class.animate-slideOutUp]="closingIconPanel()"
             [class.animate-scaleIn]="openingIconPanel()">
          <div class="p-6" [innerHTML]="selectedIconInfo()"></div>
        </div>
      </div>
      
      <!-- Para otros pasos (excepto 1, 2, 3, 4, 5), mostrar contenido normal -->
      <div *ngIf="selectedStep()!.number !== 1 && selectedStep()!.number !== 2 && selectedStep()!.number !== 3 && selectedStep()!.number !== 4 && selectedStep()!.number !== 5" class="p-6">
        <!-- Descripción detallada -->
        <div *ngIf="selectedStep()!.detailedInfo" class="mb-6">
          <h4 class="text-lg font-usco-condensed-bold mb-3 text-usco-vino">Información detallada</h4>
          <div class="text-usco-gris-dark leading-relaxed font-usco space-y-4" [innerHTML]="formatText(selectedStep()!.detailedInfo)"></div>
        </div>

        <!-- Requisitos -->
        <div *ngIf="selectedStep()!.requirements && selectedStep()!.requirements!.length > 0" class="mb-6">
          <h4 class="text-lg font-usco-condensed-bold mb-3 text-usco-vino">Requisitos necesarios</h4>
          <ul class="space-y-2">
            <li *ngFor="let requirement of selectedStep()!.requirements!" class="flex items-start">
              <span class="text-usco-ocre-dark mr-2 text-lg">✓</span>
              <span class="text-usco-gris-dark font-usco">{{ requirement }}</span>
            </li>
          </ul>
        </div>

        <!-- Consejos -->
        <div *ngIf="selectedStep()!.tips && selectedStep()!.tips!.length > 0" class="mb-4">
          <h4 class="text-lg font-usco-condensed-bold mb-3 text-usco-vino">Consejos útiles</h4>
          <ul class="space-y-2">
            <li *ngFor="let tip of selectedStep()!.tips!" class="flex items-start">
              <span class="text-usco-ocre-dark mr-2 text-lg">💡</span>
              <span class="text-usco-gris-dark font-usco">{{ tip }}</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="bg-usco-gris-pale px-6 py-4 flex justify-between items-center border-t border-usco-gris-lightest flex-shrink-0">
      <!-- Enlace para PDFs del paso 1 -->
      <a *ngIf="selectedStep()?.number === 1 && selectedStep()?.pdfs && selectedStep()?.pdfs![selectedPdfIndex()]" 
         [href]="selectedStep()!.pdfs![selectedPdfIndex()].url" 
         target="_blank" 
         class="bg-usco-vino hover:bg-usco-vino-dark text-white px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold">
        Ver PDF de {{ selectedStep()!.pdfs![selectedPdfIndex()].name }}
      </a>
      
      <!-- Enlace para modalidades del paso 3 que tengan PDF -->
      <a *ngIf="selectedStep()?.number === 3 && selectedStep()?.modalidades && selectedStep()?.modalidades![selectedModalidadIndex()].pdf" 
         [href]="selectedStep()!.modalidades![selectedModalidadIndex()].pdf" 
         target="_blank" 
         class="bg-usco-vino hover:bg-usco-vino-dark text-white px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold">
        <span *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].name === '3.1 Puntajes de Cierre Programas de Pregrado'">Ver PDF de Puntajes de cierre</span>
        <span *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].name === 'Ponderaciones por Programa Académico'">Ver PDF de Ponderaciones</span>
        <span *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].name !== '3.1 Puntajes de Cierre Programas de Pregrado' && selectedStep()!.modalidades![selectedModalidadIndex()].name !== 'Ponderaciones por Programa Académico'">Ver PDF de {{ selectedStep()!.modalidades![selectedModalidadIndex()].name }}</span>
      </a>
      <!-- Espacio vacío para alinear el botón cerrar a la derecha cuando no hay PDF -->
      <div *ngIf="selectedStep()?.number !== 1 && (selectedStep()?.number !== 3 || (selectedStep()?.number === 3 && selectedStep()?.modalidades && !selectedStep()?.modalidades![selectedModalidadIndex()].pdf))"></div>
      <button 
        (click)="hideDialog()"
        class="bg-usco-ocre hover:bg-usco-ocre-dark text-black px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold btn-cerrar-animated"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<!-- Modal para Términos de Referencia Legal -->
<div *ngIf="visibleTerms()" class="fixed inset-0 z-50 flex items-center justify-center" [ngClass]="closingTerms() ? 'animate-fadeOut' : 'animate-fadeIn'">
  <!-- Fondo opacado -->
  <div class="modal-overlay" [ngClass]="closingTerms() ? 'animate-fadeOut' : 'animate-fadeIn'" (click)="hideTermsDialog()"></div>
  
  <!-- Modal -->
  <div class="relative bg-white rounded-lg shadow-xl w-[95vw] max-w-[1200px] h-[90vh] flex flex-col" [ngClass]="closingTerms() ? 'animate-scaleOut' : 'animate-scaleIn'">
    <!-- Header -->
    <div class="bg-usco-vino text-white px-6 py-4">
      <h3 class="text-lg font-usco-condensed-bold">
        Términos de Referencia Legal del Proceso de Admisiones
      </h3>
    </div>
    
    <!-- Contenido -->
    <div class="overflow-y-auto flex-1 p-6">
      
      <div class="space-y-4 text-usco-gris-dark font-usco leading-relaxed">
        <p class="font-usco-bold text-usco-vino text-xl font-bold">
          Sólo se aceptan las pruebas de Estado (ICFES o Saber 11) con diez (10) años de vigencia, es decir, a partir del año 2016.
        </p>
        <p>
          • En su calidad de aspirante a ingresar a la Universidad Surcolombiana, asume la responsabilidad legal de leer completamente para conocer el Reglamento de Inscripción, Admisión y Matrícula - Acuerdo Número 003 del 12 de abril de 2016 expedido por el Consejo Académico, normatividad que fija las condiciones, requisitos y demás normas y disposiciones internas que establece la Universidad Surcolombiana para el proceso de admisión a los Programas Académicos de Pregrado que ofrece. En consecuencia, es su absoluta responsabilidad atender todo el contenido del presente INSTRUCTIVO GUÍA PASO A PASO.
        </p>
        
        <p>
          • En su calidad de aspirante, asume la responsabilidad de ingresar toda la información solicitada, la cual debe ser completa, exacta, verídica y bajo la gravedad de juramento; por lo tanto, no habrá lugar a solicitar a la Universidad modificaciones o correcciones.
        </p>
        
        <p>
          • Es de indicar que, la Universidad Surcolombiana ha implementado la virtualidad para el proceso de la matrícula financiera y académica; ante lo cual, si usted adquiere la calidad de admitido(a) tiene la absoluta responsabilidad de cargar la documentación reglamentaria a través de la plataforma tecnológica dispuesta para tal fin, en las fechas establecidas en cada uno de los llamados. En el numeral 9 de este Instructivo Guía Paso a Paso se indica la documentación que debe tener lista a cargar cuando sea admitido(a). De no cumplir con los requisitos y documentación exigida para la matrícula financiera y académica, perderá el cupo.
        </p>
        
        <p>
          Aspirante, para la Universidad Surcolombiana es grato que desee ser parte de la comunidad universitaria; por ello, es indispensable que lea la totalidad de la información que se ha publicado para usted. Realice la completa lectura de los nueve (9) pasos de este INSTRUCTIVO GUÍA y en consecuencia tenga la suficiente claridad del proceso de inscripción, admisión y matrícula.
        </p>
        
      </div>
    </div>
    
    <!-- Footer -->
    <div class="bg-usco-gris-pale px-6 py-4 flex justify-end border-t border-usco-gris-lightest flex-shrink-0">
      <button 
        (click)="hideTermsDialog()"
        class="bg-usco-ocre hover:bg-usco-ocre-dark text-black px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold btn-cerrar-animated"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<!-- Modal para Política de Gratuidad -->
<div *ngIf="visibleGratuidad()" class="fixed inset-0 z-50 flex items-center justify-center" [ngClass]="closingGratuidad() ? 'animate-fadeOut' : 'animate-fadeIn'">
  <!-- Fondo opacado -->
  <div class="modal-overlay" [ngClass]="closingGratuidad() ? 'animate-fadeOut' : 'animate-fadeIn'" (click)="hideGratuidadDialog()"></div>
  
  <!-- Modal -->
  <div class="relative bg-white rounded-lg shadow-xl w-[95vw] max-w-[1000px] h-[80vh] flex flex-col" [ngClass]="closingGratuidad() ? 'animate-scaleOut' : 'animate-scaleIn'">
    <!-- Header -->
    <div class="bg-usco-vino text-white px-6 py-4">
      <h3 class="text-lg font-usco-condensed-bold">
        Política de Gratuidad en la Matrícula
      </h3>
    </div>
    
    <!-- Contenido -->
    <div class="overflow-y-auto flex-1 p-6">
      <div class="space-y-6 text-usco-gris-dark font-usco leading-relaxed">
        
        <!-- Encabezado -->
        <div class="text-center">
          <h2 class="font-usco-condensed-bold text-usco-vino text-xl mb-2">UNIVERSIDAD SURCOLOMBIANA</h2>
          <h3 class="font-usco-condensed-bold text-usco-vino text-lg mb-2">POLÍTICA DE GRATUIDAD</h3>
          <h4 class="font-usco-bold text-usco-gris-dark">INFORMACIÓN GENERAL</h4>
        </div>

        <!-- Requisitos -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">REQUISITOS</h4>
          <p class="mb-3">Para ser beneficiario(a) de la Política de Gratuidad en la Matrícula de Pregrado los ciudadanos deberán cumplir con los siguientes requisitos:</p>
          <ol class="space-y-2 pl-4">
            <li><strong>1.</strong> Estar matriculado(a) en un programa académico de pregrado (técnico profesional, tecnológico o universitario), en alguna de las 67 Instituciones de Educación Superior (IES) públicas y estar registrado en el SNIES.</li>
            <li><strong>2.</strong> No tener título profesional universitario.</li>
            <li><strong>3.</strong> Demostrar la pertenencia a alguno de los siguientes grupos:
              <ul class="mt-2 ml-4 space-y-1">
                <li>a) Estrato socioeconómico 1, 2, 3 o sin estrato.</li>
                <li>b) Población indígena.</li>
                <li>c) Población Rrom.</li>
                <li>d) Comunidades negras, afrocolombianas, raizales y palenqueras.</li>
                <li>e) Población víctima del conflicto.</li>
                <li>f) Población con discapacidad.</li>
                <li>g) Comunidades campesinas.</li>
                <li>h) Población privada de la libertad.</li>
                <li>i) Grupos A, B o C del Sisbén IV, en cualquiera de sus subgrupos.</li>
              </ul>
            </li>
          </ol>
        </div>

        <!-- Valores que cubre -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">¿QUÉ VALORES CUBRE EL BENEFICIO?</h4>
          <p class="mb-3">El beneficio que se otorga en el marco de la Política de Gratuidad en la Matrícula consiste en el pago del valor de la matrícula ordinaria neta de los estudiantes de programas pregrado de las IES públicas.</p>
          <p class="mb-3">La matrícula ordinaria neta corresponde al valor inicialmente liquidado por las IES públicas por concepto de matrícula</p>
          <p class="mb-2">El beneficio no cubre la aplicación de los descuentos o apoyos a los que el estudiante tenga derecho tales como:</p>
          <ul class="ml-4 space-y-1">
            <li>- Votaciones por sufragio electoral.</li>
            <li>- Becas.</li>
            <li>- Apoyos de las entidades territoriales y/o de la misma institución de educación superior públicas u otras fuentes o conceptos.</li>
          </ul>
        </div>

        <!-- Lo que no incluye -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">EL BENEFICIO NO INCLUYE:</h4>
          <ul class="ml-4 space-y-1">
            <li>- El pago de derechos pecuniarios por cursos intersemestrales.</li>
            <li>- Derechos de grado.</li>
            <li>- Cobros complementarios (derechos complementarios).</li>
            <li>- Extraordinarios.</li>
            <li>- Extemporáneos.</li>
            <li>- Administrativos (Fortalecimiento a la conectividad).</li>
            <li>- Ningún otro derecho pecuniario o concepto que no esté explícitamente contemplado en el Reglamento Operativo vigente.</li>
          </ul>
        </div>

        <!-- Duración -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">¿CUÁNTO DURA EL BENEFICIO?</h4>
          <p class="mb-3">El beneficio cubre el total de la duración de un programa académico de acuerdo al registro calificado registrado en SNIES.</p>
          <p>Con el fin de promover la permanencia y graduación, la Política de Gratuidad en la Matricula cubrirá por rezago académico u otras figuras asociadas a la finalización del plan de estudios del programa, hasta un (1) periodo académico adicional para formación técnica y tecnológica y hasta dos (2) periodos académicos adicionales para formación profesional a los establecidos. Los periodos de rezago solo se asignarán a estudiantes que se les haya asignado el beneficio.</p>
        </div>

        <!-- Causales de terminación -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">CAUSALES DE TERMINACIÓN DEL BENEFICIO DE LA POLÍTICA DE GRATUIDAD EN LA MATRÍCULA</h4>
          <ol class="space-y-2 pl-4">
            <li><strong>1.</strong> Por cumplimiento de la duración del beneficio según el Reglamento Operativo vigente.</li>
            <li><strong>2.</strong> Cuando el beneficiario(a) haya accedido a la Política de Gratuidad en la Matrícula con información no veraz, o con documentos adulterados.</li>
            <li><strong>3.</strong> Cuando pierda la condición de estudiante de acuerdo con los reglamentos internos de las IES, la cual deberá informarlo al Ministerio de Educación Nacional a través de la plantilla de caracterización.</li>
            <li><strong>4.</strong> Obtener un título de profesional universitario.</li>
            <li><strong>5.</strong> Por fallecimiento del estudiante.</li>
          </ol>
          
          <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-4">
            <p class="font-usco-bold mb-2">Nota 1</p>
            <p class="mb-2">Si el estudiante recibe un título de pregrado en el Nivel profesional, perderá el beneficio automáticamente, así mismo, si el estudiante realiza cambio de IES, el beneficio no seguirá en la Universidad Surcolombiana.</p>
            
            <p class="font-usco-bold mb-2">Nota 2</p>
            <p>Es de aclarar que los estudiantes podrán aplazar sus estudios sin que esto afecte la continuidad del beneficio de la Política de Gratuidad en la Matrícula, siempre que conserven la condición de estudiante conforme a los reglamentos de las IES públicas respectivas.</p>
          </div>
        </div>

        <!-- Cambios de programa -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">CAMBIOS DE PROGRAMA O IES</h4>
          <p class="mb-3">Los beneficiarios de la Política de Gratuidad en la Matrícula podrán cambiar de IES y/o programa académico atendiendo a las disposiciones que en dicha materia contemplen las IES, sin que esto afecte la continuidad del beneficio.</p>
          <p class="mb-3">Para que el cambio de programa o de IES se efectúe, el estudiante debe informar por escrito a ambas IES la intención de cambiar el beneficio y dejar claro en que IES quiere que se aplique el beneficio.</p>
          <p class="mb-3">La IES a la cual cambió o desea cambiar deberá reportarlo como matriculado en el SNIES. Cada cambio que realice el estudiante acumulará los periodos ya financiados. En este sentido, a los periodos académicos a financiar, una vez el estudiante realice el cambio, se le descontará los periodos académicos ya financiados.</p>
          <p class="mb-2">Frente al cambio de programa de pregrado en un nivel de formación diferente al financiado inicialmente, se tendrán en cuenta las siguientes situaciones:</p>
          <ol class="space-y-2 pl-4">
            <li><strong>1.</strong> Si el cambio se realiza a un programa con mayor número de periodos académicos, se habilitarán los periodos adicionales de acuerdo con lo establecido en el registro calificado del nuevo programa.</li>
            <li><strong>2.</strong> Si el cambio se realiza a un programa con menor número de periodos académicos, se disminuirán los periodos aprobados inicialmente en función del registro calificado del nuevo programa.</li>
          </ol>
          <p class="mt-2">En cualquier caso, los cambios de IES o programas solo podrán realizarse entre IES públicas.</p>
        </div>

        <!-- Cómo acceder -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">¿CÓMO ACCEDER AL BENEFICIO?</h4>
          <p class="mb-2">El paso a paso es muy sencillo:</p>
          <ul class="ml-4 space-y-2">
            <li>• El estudiante debe dirigirse a una de las 67 Instituciones de Educación Superior públicas del país, elegir un programa académico de pregrado (técnico profesional, tecnológico o universitario), ser admitido por la institución y matricularse.</li>
            <li>• La Institución se encargará de registrar al estudiante en el Sistema Nacional de Información de Educación Superior-SNIES.</li>
          </ul>
          
          <div class="bg-red-50 border-l-4 border-red-400 p-4 mt-4">
            <p class="font-usco-bold mb-2">Nota 3</p>
            <p>En caso que el estudiante resulte excluido de la verificación que realiza el Ministerio de Educación por alguna de las causales y este no desembolse los pagos de la matrícula ordinaria neta, la IES realizará el cobro de este valor a los estudiantes quienes deberán asumir los valores cobrados por la IES. La Universidad Surcolombiana advierte de esta situación al momento de descargar el comprobante de pago.</p>
          </div>
        </div>

        <!-- Más información -->
        <div class="bg-usco-gris-pale border border-usco-gris-lighter rounded p-4">
          <p class="font-usco-bold text-usco-vino mb-2">MÁS INFORMACIÓN EN:</p>
          <a href="https://www.usco.edu.co/documento/486161" target="_blank" class="text-usco-vino font-usco-bold underline hover:text-usco-vino-dark">
            https://www.usco.edu.co/documento/486161
          </a>
        </div>
        
      </div>
    </div>
    
    <!-- Footer -->
    <div class="bg-usco-gris-pale px-6 py-4 flex justify-end border-t border-usco-gris-lightest flex-shrink-0">
      <button 
        (click)="hideGratuidadDialog()"
        class="bg-usco-ocre hover:bg-usco-ocre-dark text-black px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold btn-cerrar-animated"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<router-outlet />
