<!-- Header banner con logo de la universidad -->
<img 
  src="images/usco.svg" 
  alt="Universidad Surcolombiana" 
  class="w-full h-auto"
  onerror="this.style.display='none'; this.nextElementSibling.style.display='block'"
/>
<div style="display:none; color:red; font-weight:bold; padding: 10px;">LOGO NO CARGA - USCO</div>

<!-- Botones principales -->
<section class="py-8">
  <div class="container mx-auto px-4">
    <p class="text-center text-black text-2xl font-usco mb-6">
      <strong>Bienvenido(a) apreciado(a) aspirante a la Universidad Surcolombiana, <br>reciba un cordial saludo.</strong>
    </p>
    <!-- Primera fila: Los 3 acuerdos -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-6xl mx-auto mb-4">
      <a href="documents/ACUERDO-CA-016-2025.pdf" target="_blank"
       class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl text-center block">
        Acuerdo CA 016 del 09 de septiembre de 2025
      </a>
      <a href="documents/ACUERDO-CA-021-2025.pdf" target="_blank"
       class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl text-center block">
        Acuerdo CA 021 del 02 de octubre de 2025
      </a>
      <a href="documents/ACUERDO-CA-023-2025.pdf" target="_blank"
       class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl text-center block">
        Acuerdo CA 023 del 14 de octubre de 2025
      </a>
    </div>
    
    <!-- Segunda fila: T√©rminos y Preguntas Frecuentes -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 max-w-6xl mx-auto">
      <button (click)="showTermsDialog()" class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl text-center cursor-pointer">
        T√©rminos de referencia legal del proceso de admisiones
      </button>
      <a href="https://www.usco.edu.co/es/faq/admisiones/" target="_blank" class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl flex items-center justify-center">
        Preguntas Frecuentes
      </a>
    </div>
    
    <!-- Bot√≥n de Pol√≠tica de Gratuidad -->
    <div class="max-w-6xl mx-auto mt-8">
      <button (click)="showGratuidadDialog()" class="w-full bg-usco-gris-pale border border-usco-gris-lighter rounded-lg p-6 cursor-pointer hover:shadow-md transition-shadow duration-200 text-left flex items-center">
        <div class="flex-1">
          <h3 class="text-lg font-usco-condensed-bold text-usco-vino mb-3">
            POL√çTICA DE GRATUIDAD EN LA MATR√çCULA
          </h3>
          <p class="text-usco-gris-dark font-usco">
            La Pol√≠tica de Gratuidad se aplica conforme el Reglamento Operativo comunicado por el Ministerio de Educaci√≥n Nacional
          </p>
        </div>
        <div class="ml-4 flex-shrink-0">
          <img src="images/hacer-clic.png" alt="Hacer clic" class="w-8 h-8 object-contain" style="filter: brightness(0) saturate(100%);">
        </div>
      </button>
    </div>
  </div>
</section>


<!-- Banner principal tipo bot√≥n -->
<section class="container mx-auto px-4 py-8">
  <div class="max-w-5xl mx-auto">
    <div class="rounded-3xl shadow-xl">
      <img 
        src="images/banner-principal.png" 
        alt="Banner Principal - Proceso de Matr√≠cula"
        class="w-full h-auto rounded-3xl object-cover"
        style="height: auto;"
      />
    </div>
  </div>
</section>

<!-- Pasos de matr√≠cula -->
<main class="container mx-auto px-4 py-12">
  <div class="max-w-6xl mx-auto">
    <div class="relative">
      <div *ngFor="let step of steps; let isLast = last; let isFirst = first" class="relative">
        <!-- L√≠nea vertical conectora para cada paso (excepto el √∫ltimo) - solo desktop -->
        <div *ngIf="!isLast" class="absolute left-6 w-0.5 bg-usco-ocre-dark hidden md:block" 
             [ngStyle]="isFirst ? {top: '62px', height: 'calc(100% + 18px)'} : {top: '48px', height: 'calc(100% + 48px)'}">
        </div>
        <!-- Estructura uniforme para todos los pasos -->
        <div class="flex items-center mb-8">
          <!-- N√∫mero fuera del banner -->
          <div class="w-8 h-8 md:w-12 md:h-12 text-white rounded-full flex items-center justify-center font-bold text-sm md:text-lg mr-4 md:mr-12 flex-shrink-0 relative z-10 bg-usco-vino">
            {{ step.number }}
          </div>
          
          <!-- Flecha - solo en desktop -->
          <div class="hidden md:flex text-usco-vino text-6xl mr-16 flex-shrink-0 w-8 items-center justify-center">
            ‚Üí
          </div>
          
          <!-- Banner para todos los pasos con imagen -->
          <div class="rounded-3xl shadow-xl cursor-pointer transform transition-all duration-300 hover:scale-105 hover:shadow-2xl flex-1"
            (click)="showDialog(step)"
          >
            <img 
              [src]="'images/paso-' + step.number + '.png'" 
              [alt]="step.title"
              class="w-full h-auto rounded-3xl object-cover"
            />
          </div>
        </div>
        
        <!-- Aviso especial entre paso 4 y 5 -->
        <div *ngIf="step.number === 4" class="mb-8" id="atencion-container">
          <div class="flex items-center">
            <!-- Espaciador para alinear con los banners -->
            <div class="w-8 h-8 md:w-12 md:h-12 mr-4 md:mr-12 flex-shrink-0"></div>
            <div class="hidden md:flex text-6xl mr-16 flex-shrink-0 w-8"></div>
            
            <!-- Recuadro del aviso tipo acorde√≥n -->
            <div class="border-2 border-gray-300 rounded-lg bg-white shadow-lg flex-1 overflow-hidden transition-all duration-700 ease-in-out"
                 [ngStyle]="{'max-height': atencionVisible() ? '500px' : '0px', 'padding': atencionVisible() ? '1.5rem' : '0rem', 'border-width': atencionVisible() ? '2px' : '0px'}">
              <div class="transition-opacity duration-500"
                   [ngClass]="{'opacity-100': atencionVisible(), 'opacity-0': !atencionVisible()}">
                <h3 class="text-red-600 font-usco-bold text-xl mb-4">¬°ATENCI√ìN!</h3>
                <p class="text-base text-gray-800 font-usco leading-relaxed mb-4">
                  Los admitidos que en el momento de adjuntar los documentos, del <strong>18 al 23 de noviembre de 2025</strong>, no hayan obtenido el grado de bachiller, deben adjuntar: <strong>certificado de la instituci√≥n educativa que indique fecha y entrega del t√≠tulo de bachiller</strong>. El diploma o acta de grado es un documento obligatorio para la matr√≠cula acad√©mica, entre el <strong>9 y 10 de diciembre de 2025</strong>. Favor estar pendiente de su correo electr√≥nico y celular.
                </p>
                <p class="text-base text-red-600 font-usco-bold leading-relaxed">
                  Quien no env√≠e uno de estos documentos, perder√° el cupo.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Modal personalizado con TailwindCSS -->
<div *ngIf="visible()" class="fixed inset-0 z-50 flex items-center justify-center" [ngClass]="closing() ? 'animate-fadeOut' : 'animate-fadeIn'">
  <!-- Fondo opacado -->
  <div class="modal-overlay" [ngClass]="closing() ? 'animate-fadeOut' : 'animate-fadeIn'" (click)="hideDialog()"></div>
  
  <!-- Modal -->
  <div class="relative bg-white rounded-lg shadow-xl w-[95vw] max-w-[1700px] h-[90vh] flex flex-col" [ngClass]="closing() ? 'animate-scaleOut' : 'animate-scaleIn'">
    <!-- Header -->
    <div class="bg-usco-vino text-white px-6 py-4">
      <h3 class="text-lg font-usco-condensed-bold">
        {{ selectedStep()?.title || '' }}
      </h3>
    </div>
    
    <!-- Contenido -->
    <div class="overflow-y-auto flex-1" *ngIf="selectedStep()">
      <!-- Solo mostrar PDFs para el paso 1 y paso 3 -->
      <div *ngIf="(selectedStep()!.number === 1 || selectedStep()!.number === 3) && selectedStep()!.pdfs && selectedStep()!.pdfs!.length > 0" class="p-4">
        <!-- Listado horizontal de sedes -->
        <div class="mb-6">
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <button 
              *ngFor="let pdf of selectedStep()!.pdfs!; let i = index"
              (click)="selectPdf(i, pdf.url)"
              class="sede-button p-4 rounded-lg border-2 transition-all duration-200 hover:scale-105 hover:shadow-lg"
              [ngClass]="selectedPdfIndex() === i ? 
                'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
              <div class="text-center">
                <div class="font-usco-bold text-sm">{{ pdf.name }}</div>
              </div>
            </button>
          </div>
        </div>
        
        <!-- Contenido del PDF -->
        <div *ngIf="selectedStep()!.pdfs && selectedStep()!.pdfs![selectedPdfIndex()]" class="bg-white">
          <div *ngIf="!isBrowser()" class="flex items-center justify-center h-[400px] bg-gray-100 rounded">
            <p class="text-usco-gris">Cargando visor PDF...</p>
          </div>
          
          <div *ngIf="isBrowser()">
            <!-- Visor PDF con embed simple (como en PHP) -->
            <div class="border rounded bg-white p-4">
              <!-- Embed PDF directo -->
              <embed
                [src]="sanitizePdfUrl(currentPdfUrl()!)"
                width="98%"
                height="630"
                type="application/pdf"
                class="rounded border" />
            </div>
          </div>
        </div>
      </div>

      <!-- Mostrar modalidades para el paso 2, 3 y paso 4 -->
      <div *ngIf="(selectedStep()!.number === 2 || selectedStep()!.number === 3 || selectedStep()!.number === 4) && selectedStep()!.modalidades && selectedStep()!.modalidades!.length > 0" class="p-4">
        <!-- Texto informativo antes de las modalidades (solo para paso 2) -->
        <div *ngIf="selectedStep()!.number === 2" class="bg-yellow-50 border-l-4 border-yellow-400 p-6 mb-6">
          <h4 class="text-lg mb-3">
            <a href="https://www.usco.edu.co/archivosUsuarios/16/publicacion/consejo_academico/acuerdo/acuerdo_003_de_2016.pdf" target="_blank" class="text-blue-600 underline hover:text-blue-800">
              Ver Reglamento. Lectura obligatoria.
            </a>
          </h4>
          
          <div class="space-y-4 text-usco-gris-dark font-usco">
            <p class="font-usco-bold">
              IMPORTANTE: De conformidad con lo establecido en el Acuerdo N√∫mero 003 del 12 de abril de 2016 expedido por el Consejo Acad√©mico, el estudiante que haya estado matriculado en la Universidad Surcolombiana y por alguna causal perdi√≥ el cupo en un Programa Acad√©mico de Pregrado, NO podr√° inscribirse al mismo Programa, ya sea en otra jornada, en otra Sede o al mismo Programa, as√≠ haya cambiado de denominaci√≥n.
            </p>
            
            <p>
              Con fundamento en el Decreto n√∫mero 860 del 23 de abril de 2003 expedido por el Ministerio de Educaci√≥n Nacional, la Prueba de Estado (ICFES o Saber 11) ser√° el √∫nico documento v√°lido para inscribirse. Recuerde que solo se aceptan las pruebas de Estado (ICFES o Saber 11) con 10 a√±os de vigencia, es decir, a partir del a√±o 2016.
            </p>
          </div>
        </div>
        
        <!-- Listado horizontal de modalidades -->
        <div class="mb-6">
          <div class="grid gap-4" [ngClass]="(selectedStep()!.number === 3 || selectedStep()!.number === 4) ? 'grid-cols-1 md:grid-cols-3' : 'grid-cols-2 md:grid-cols-4'">
            <button 
              *ngFor="let modalidad of selectedStep()!.modalidades!; let i = index"
              (click)="selectModalidad(i)"
              class="sede-button p-4 rounded-lg border-2 transition-all duration-200 hover:scale-105 hover:shadow-lg"
              [ngClass]="selectedModalidadIndex() === i ? 
                'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
              <div class="text-center">
                <div class="font-usco-bold text-sm">{{ modalidad.name }}</div>
              </div>
            </button>
          </div>
        </div>
        
        <!-- Contenido de la modalidad -->
        <div *ngIf="selectedStep()!.modalidades && selectedStep()!.modalidades![selectedModalidadIndex()]" class="bg-white">
          <!-- Si la modalidad tiene PDF, mostrarlo -->
          <div *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].pdf && !isBrowser()" class="flex items-center justify-center h-[400px] bg-gray-100 rounded">
            <p class="text-usco-gris">Cargando visor PDF...</p>
          </div>
          
          <div *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].pdf && isBrowser()">
            <div class="border rounded bg-white p-4">
              <embed
                [src]="sanitizePdfUrl(selectedStep()!.modalidades![selectedModalidadIndex()].pdf!)"
                width="98%"
                height="630"
                type="application/pdf"
                class="rounded border" />
            </div>
          </div>
          
          <!-- Si la modalidad tiene contenido de texto, mostrarlo -->
          <div *ngIf="!selectedStep()!.modalidades![selectedModalidadIndex()].pdf && selectedStep()!.modalidades![selectedModalidadIndex()].content" class="border rounded bg-white p-4">
            <div class="text-usco-gris-dark leading-relaxed font-usco space-y-4 overflow-x-auto" [innerHTML]="formatText(selectedStep()!.modalidades![selectedModalidadIndex()].content)"></div>
            
            <!-- Acordeones si existen -->
            <div *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].acordeones" class="mt-4 space-y-2">
              <div *ngFor="let acordeon of selectedStep()!.modalidades![selectedModalidadIndex()].acordeones!; let i = index" class="border border-usco-gris-lighter rounded-lg">
                <button 
                  (click)="toggleAcordeon(i)"
                  class="w-full px-4 py-3 text-left transition-colors duration-200 rounded-t-lg flex items-center justify-between"
                  [ngClass]="{
                    'bg-usco-ocre text-gray-600 rounded-lg': selectedAcordeonIndex() !== i,
                    'bg-usco-vino text-white rounded-b-none': selectedAcordeonIndex() === i
                  }"
                  style="transition: all 0.2s;"
                  (mouseenter)="onAcordeonMouseEnter($event)"
                  (mouseleave)="onAcordeonMouseLeave($event, i)">
                  <span class="font-usco-bold">{{ acordeon.titulo }}</span>
                  <span class="text-xl" [ngClass]="selectedAcordeonIndex() === i ? 'rotate-180' : 'rotate-0'" style="transition: transform 0.2s;">‚ñº</span>
                </button>
                <div 
                  *ngIf="selectedAcordeonIndex() === i || acordeonClosing() === i" 
                  class="px-4 py-3 bg-white border-t border-usco-gris-lighter overflow-hidden"
                  [ngClass]="{
                    'animate-slideDown': selectedAcordeonIndex() === i && acordeonClosing() !== i,
                    'animate-slideUp': acordeonClosing() === i
                  }">
                  <div class="text-usco-gris-dark font-usco" [innerHTML]="formatText(acordeon.contenido)"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Para el paso 5, mostrar iconos interactivos -->
      <div *ngIf="selectedStep()!.number === 5" class="p-6">
        <div class="text-center mb-8">
          <h2 class="text-2xl font-usco-condensed-bold text-blue-900 bg-usco-ocre-pale px-6 py-4 rounded-lg border-l-4 border-usco-vino shadow-md">
            RECUERDE QUE PARA REALIZAR LA INSCRIPCI√ìN Y MATR√çCULA DEBE SEGUIR OBLIGATORIAMENTE LOS SIGUIENTES PASOS
          </h2>
        </div>
        <!-- Desktop view with icons and arrows -->
        <div class="hidden md:flex items-center justify-center space-x-6">
          <!-- PIN -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('pin')">
            <img src="images/pin.png" alt="PIN" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'pin' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'pin'" />
            <img src="images/pin-hover.png" alt="PIN Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'pin'" 
                 [class.opacity-0]="activeIcon() !== 'pin'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'pin'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">‚Üí</div>
          
          <!-- Formulario Inscripci√≥n -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('formulario')">
            <img src="images/formulario-inscripcion.png" alt="Formulario Inscripci√≥n" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'formulario' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'formulario'" />
            <img src="images/formulario-inscripcion-hover.png" alt="Formulario Inscripci√≥n Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'formulario'" 
                 [class.opacity-0]="activeIcon() !== 'formulario'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'formulario'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">‚Üí</div>
          
          <!-- Estado Inscripci√≥n -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('estado')">
            <img src="images/estado-inscripcion.png" alt="Estado Inscripci√≥n" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'estado' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'estado'" />
            <img src="images/estado-inscripcion-hover.png" alt="Estado Inscripci√≥n Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'estado'" 
                 [class.opacity-0]="activeIcon() !== 'estado'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'estado'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">‚Üí</div>
          
          <!-- Admitidos -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('admitidos')">
            <img src="images/admitidos.png" alt="Admitidos" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'admitidos' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'admitidos'" />
            <img src="images/admitidos-hover.png" alt="Admitidos Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'admitidos'" 
                 [class.opacity-0]="activeIcon() !== 'admitidos'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'admitidos'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">‚Üí</div>
          
          <!-- Matr√≠cula Financiera -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('financiera')">
            <img src="images/financiera.png" alt="Matr√≠cula Financiera" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'financiera' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'financiera'" />
            <img src="images/financiera-hover.png" alt="Matr√≠cula Financiera Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'financiera'" 
                 [class.opacity-0]="activeIcon() !== 'financiera'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'financiera'" />
          </div>
          
          <!-- Flecha -->
          <div class="text-usco-vino text-4xl flex items-center">‚Üí</div>
          
          <!-- Matr√≠cula Acad√©mica -->
          <div class="cursor-pointer group relative" (click)="showIconInfo('academica')">
            <img src="images/academica.png" alt="Matr√≠cula Acad√©mica" class="w-48 h-48 object-contain object-center transition-opacity duration-300" 
                 [class.opacity-0]="activeIcon() === 'academica' || null" 
                 [class.group-hover:opacity-0]="activeIcon() !== 'academica'" />
            <img src="images/academica-hover.png" alt="Matr√≠cula Acad√©mica Hover" class="w-48 h-48 object-contain object-center absolute top-0 left-0 transition-opacity duration-300" 
                 [class.opacity-100]="activeIcon() === 'academica'" 
                 [class.opacity-0]="activeIcon() !== 'academica'" 
                 [class.group-hover:opacity-100]="activeIcon() !== 'academica'" />
          </div>
        </div>
        
        <!-- Mobile view with large buttons -->
        <div class="md:hidden grid grid-cols-1 gap-4 max-w-md mx-auto">
          <!-- PIN Button -->
          <button (click)="showIconInfo('pin')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'pin' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">5.1 Compre el Pin</div>
          </button>
          
          <!-- Formulario Button -->
          <button (click)="showIconInfo('formulario')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'formulario' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">5.2 Diligencie el Formulario de Inscripci√≥n</div>
          </button>
          
          <!-- Estado Button -->
          <button (click)="showIconInfo('estado')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'estado' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">5.3 Verifique el Estado de la Inscripci√≥n</div>
          </button>
          
          <!-- Admitidos Button -->
          <button (click)="showIconInfo('admitidos')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'admitidos' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">5.4 Consulte las Fechas de Admitidos</div>
          </button>
          
          <!-- Matr√≠cula Financiera Button -->
          <button (click)="showIconInfo('financiera')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'financiera' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">5.5 Diligencie el Formulario de Admitidos: Matr√≠cula Financiera</div>
          </button>
          
          <!-- Matr√≠cula Acad√©mica Button -->
          <button (click)="showIconInfo('academica')" class="w-full p-4 rounded-lg border-2 transition-all duration-200 text-left"
                  [ngClass]="activeIcon() === 'academica' ? 
                    'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                    'bg-white text-usco-gris border-usco-gris-lighter hover:bg-usco-ocre hover:text-black hover:border-usco-ocre'">
            <div class="font-usco-bold text-lg">5.6 Matr√≠cula Acad√©mica</div>
          </button>
        </div>
        
        <!-- Panel de informaci√≥n del icono seleccionado -->
        <div *ngIf="selectedIconInfo()" class="mt-6 bg-white border border-usco-gris-lighter rounded-lg shadow-lg"
             [class.animate-slideInDown]="!closingIconPanel() && !openingIconPanel()"
             [class.animate-slideOutUp]="closingIconPanel()"
             [class.animate-scaleIn]="openingIconPanel()">
          <div class="p-6" [innerHTML]="selectedIconInfo()"></div>
        </div>
      </div>
      
      <!-- Para otros pasos (excepto 1, 2, 3, 4, 5), mostrar contenido normal -->
      <div *ngIf="selectedStep()!.number !== 1 && selectedStep()!.number !== 2 && selectedStep()!.number !== 3 && selectedStep()!.number !== 4 && selectedStep()!.number !== 5" class="p-6">
        <!-- Descripci√≥n detallada -->
        <div *ngIf="selectedStep()!.detailedInfo" class="mb-6">
          <h4 class="text-lg font-usco-condensed-bold mb-3 text-usco-vino">Informaci√≥n detallada</h4>
          <div class="text-usco-gris-dark leading-relaxed font-usco space-y-4" [innerHTML]="formatText(selectedStep()!.detailedInfo)"></div>
        </div>

        <!-- Requisitos -->
        <div *ngIf="selectedStep()!.requirements && selectedStep()!.requirements!.length > 0" class="mb-6">
          <h4 class="text-lg font-usco-condensed-bold mb-3 text-usco-vino">Requisitos necesarios</h4>
          <ul class="space-y-2">
            <li *ngFor="let requirement of selectedStep()!.requirements!" class="flex items-start">
              <span class="text-usco-ocre-dark mr-2 text-lg">‚úì</span>
              <span class="text-usco-gris-dark font-usco">{{ requirement }}</span>
            </li>
          </ul>
        </div>

        <!-- Consejos -->
        <div *ngIf="selectedStep()!.tips && selectedStep()!.tips!.length > 0" class="mb-4">
          <h4 class="text-lg font-usco-condensed-bold mb-3 text-usco-vino">Consejos √∫tiles</h4>
          <ul class="space-y-2">
            <li *ngFor="let tip of selectedStep()!.tips!" class="flex items-start">
              <span class="text-usco-ocre-dark mr-2 text-lg">üí°</span>
              <span class="text-usco-gris-dark font-usco">{{ tip }}</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="bg-usco-gris-pale px-6 py-4 flex justify-between items-center border-t border-usco-gris-lightest flex-shrink-0">
      <!-- Enlace para PDFs del paso 1 -->
      <a *ngIf="selectedStep()?.number === 1 && selectedStep()?.pdfs && selectedStep()?.pdfs![selectedPdfIndex()]" 
         [href]="selectedStep()!.pdfs![selectedPdfIndex()].url" 
         target="_blank" 
         class="bg-usco-vino hover:bg-usco-vino-dark text-white px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold">
        Ver PDF de {{ selectedStep()!.pdfs![selectedPdfIndex()].name }}
      </a>
      
      <!-- Enlace para modalidades del paso 3 que tengan PDF -->
      <a *ngIf="selectedStep()?.number === 3 && selectedStep()?.modalidades && selectedStep()?.modalidades![selectedModalidadIndex()].pdf" 
         [href]="selectedStep()!.modalidades![selectedModalidadIndex()].pdf" 
         target="_blank" 
         class="bg-usco-vino hover:bg-usco-vino-dark text-white px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold">
        <span *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].name === '3.1 Puntajes de Cierre Programas de Pregrado'">Ver PDF de Puntajes de cierre</span>
        <span *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].name === 'Ponderaciones por Programa Acad√©mico'">Ver PDF de Ponderaciones</span>
        <span *ngIf="selectedStep()!.modalidades![selectedModalidadIndex()].name !== '3.1 Puntajes de Cierre Programas de Pregrado' && selectedStep()!.modalidades![selectedModalidadIndex()].name !== 'Ponderaciones por Programa Acad√©mico'">Ver PDF de {{ selectedStep()!.modalidades![selectedModalidadIndex()].name }}</span>
      </a>
      <!-- Espacio vac√≠o para alinear el bot√≥n cerrar a la derecha cuando no hay PDF -->
      <div *ngIf="selectedStep()?.number !== 1 && (selectedStep()?.number !== 3 || (selectedStep()?.number === 3 && selectedStep()?.modalidades && !selectedStep()?.modalidades![selectedModalidadIndex()].pdf))"></div>
      <button 
        (click)="hideDialog()"
        class="bg-usco-ocre hover:bg-usco-ocre-dark text-black px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold btn-cerrar-animated"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<!-- Modal para T√©rminos de Referencia Legal -->
<div *ngIf="visibleTerms()" class="fixed inset-0 z-50 flex items-center justify-center" [ngClass]="closingTerms() ? 'animate-fadeOut' : 'animate-fadeIn'">
  <!-- Fondo opacado -->
  <div class="modal-overlay" [ngClass]="closingTerms() ? 'animate-fadeOut' : 'animate-fadeIn'" (click)="hideTermsDialog()"></div>
  
  <!-- Modal -->
  <div class="relative bg-white rounded-lg shadow-xl w-[95vw] max-w-[1200px] h-[90vh] flex flex-col" [ngClass]="closingTerms() ? 'animate-scaleOut' : 'animate-scaleIn'">
    <!-- Header -->
    <div class="bg-usco-vino text-white px-6 py-4">
      <h3 class="text-lg font-usco-condensed-bold">
        T√©rminos de Referencia Legal del Proceso de Admisiones
      </h3>
    </div>
    
    <!-- Contenido -->
    <div class="overflow-y-auto flex-1 p-6">
      
      <div class="space-y-4 text-usco-gris-dark font-usco leading-relaxed">
        <p class="font-usco-bold text-usco-vino text-xl font-bold">
          S√≥lo se aceptan las pruebas de Estado (ICFES o Saber 11) con diez (10) a√±os de vigencia, es decir, a partir del a√±o 2016.
        </p>
        <p>
          ‚Ä¢ En su calidad de aspirante a ingresar a la Universidad Surcolombiana, asume la responsabilidad legal de leer completamente para conocer el Reglamento de Inscripci√≥n, Admisi√≥n y Matr√≠cula - Acuerdo N√∫mero 003 del 12 de abril de 2016 expedido por el Consejo Acad√©mico, normatividad que fija las condiciones, requisitos y dem√°s normas y disposiciones internas que establece la Universidad Surcolombiana para el proceso de admisi√≥n a los Programas Acad√©micos de Pregrado que ofrece. En consecuencia, es su absoluta responsabilidad atender todo el contenido del presente INSTRUCTIVO PASO A PASO.
        </p>
        
        <p>
          ‚Ä¢ En su calidad de aspirante, asume la responsabilidad de ingresar toda la informaci√≥n solicitada, la cual debe ser completa, exacta, ver√≠dica y bajo la gravedad de juramento; por lo tanto, no habr√° lugar a solicitar a la Universidad modificaciones o correcciones.
        </p>
        
        <p>
          ‚Ä¢ Es de indicar que, la Universidad Surcolombiana ha implementado la virtualidad para el proceso de la matr√≠cula financiera y acad√©mica; ante lo cual, si usted adquiere la calidad de admitido(a) tiene la absoluta responsabilidad de cargar la documentaci√≥n reglamentaria a trav√©s de la plataforma tecnol√≥gica dispuesta para tal fin, en las fechas establecidas en cada uno de los llamados.
        </p>
        
        <p>
          Aspirante, para la Universidad Surcolombiana es grato que desee ser parte de la comunidad universitaria; por ello, es indispensable que lea la totalidad de la informaci√≥n que se ha publicado para usted.
        </p>
        
      </div>
    </div>
    
    <!-- Footer -->
    <div class="bg-usco-gris-pale px-6 py-4 flex justify-end border-t border-usco-gris-lightest flex-shrink-0">
      <button 
        (click)="hideTermsDialog()"
        class="bg-usco-ocre hover:bg-usco-ocre-dark text-black px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold btn-cerrar-animated"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<!-- Modal para Pol√≠tica de Gratuidad -->
<div *ngIf="visibleGratuidad()" class="fixed inset-0 z-50 flex items-center justify-center" [ngClass]="closingGratuidad() ? 'animate-fadeOut' : 'animate-fadeIn'">
  <!-- Fondo opacado -->
  <div class="modal-overlay" [ngClass]="closingGratuidad() ? 'animate-fadeOut' : 'animate-fadeIn'" (click)="hideGratuidadDialog()"></div>
  
  <!-- Modal -->
  <div class="relative bg-white rounded-lg shadow-xl w-[95vw] max-w-[1000px] h-[80vh] flex flex-col" [ngClass]="closingGratuidad() ? 'animate-scaleOut' : 'animate-scaleIn'">
    <!-- Header -->
    <div class="bg-usco-vino text-white px-6 py-4">
      <h3 class="text-lg font-usco-condensed-bold">
        Pol√≠tica de Gratuidad en la Matr√≠cula
      </h3>
    </div>
    
    <!-- Contenido -->
    <div class="overflow-y-auto flex-1 p-6">
      <div class="space-y-6 text-usco-gris-dark font-usco leading-relaxed">
        
        <!-- Encabezado -->
        <div class="text-center">
          <h2 class="font-usco-condensed-bold text-usco-vino text-xl mb-2">UNIVERSIDAD SURCOLOMBIANA</h2>
          <h3 class="font-usco-condensed-bold text-usco-vino text-lg mb-2">POL√çTICA DE GRATUIDAD</h3>
          <h4 class="font-usco-bold text-usco-gris-dark">INFORMACI√ìN GENERAL</h4>
        </div>

        <!-- Requisitos -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">REQUISITOS</h4>
          <p class="mb-3">Para ser beneficiario(a) de la Pol√≠tica de Gratuidad en la Matr√≠cula de Pregrado los ciudadanos deber√°n cumplir con los siguientes requisitos:</p>
          <ol class="space-y-2 pl-4">
            <li><strong>1.</strong> Estar matriculado(a) en un programa acad√©mico de pregrado (t√©cnico profesional, tecnol√≥gico o universitario), en alguna de las 67 Instituciones de Educaci√≥n Superior (IES) p√∫blicas y estar registrado en el SNIES.</li>
            <li><strong>2.</strong> No tener t√≠tulo profesional universitario.</li>
            <li><strong>3.</strong> Demostrar la pertenencia a alguno de los siguientes grupos:
              <ul class="mt-2 ml-4 space-y-1">
                <li>a) Estrato socioecon√≥mico 1, 2, 3 o sin estrato.</li>
                <li>b) Poblaci√≥n ind√≠gena.</li>
                <li>c) Poblaci√≥n Rrom.</li>
                <li>d) Comunidades negras, afrocolombianas, raizales y palenqueras.</li>
                <li>e) Poblaci√≥n v√≠ctima del conflicto.</li>
                <li>f) Poblaci√≥n con discapacidad.</li>
                <li>g) Comunidades campesinas.</li>
                <li>h) Poblaci√≥n privada de la libertad.</li>
                <li>i) Grupos A, B o C del Sisb√©n IV, en cualquiera de sus subgrupos.</li>
              </ul>
            </li>
          </ol>
        </div>

        <!-- Valores que cubre -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">¬øQU√â VALORES CUBRE EL BENEFICIO?</h4>
          <p class="mb-3">El beneficio que se otorga en el marco de la Pol√≠tica de Gratuidad en la Matr√≠cula consiste en el pago del valor de la matr√≠cula ordinaria neta de los estudiantes de programas pregrado de las IES p√∫blicas.</p>
          <p class="mb-3">La matr√≠cula ordinaria neta corresponde al valor inicialmente liquidado por las IES p√∫blicas por concepto de matr√≠cula</p>
          <p class="mb-2">El beneficio no cubre la aplicaci√≥n de los descuentos o apoyos a los que el estudiante tenga derecho tales como:</p>
          <ul class="ml-4 space-y-1">
            <li>- Votaciones por sufragio electoral.</li>
            <li>- Becas.</li>
            <li>- Apoyos de las entidades territoriales y/o de la misma instituci√≥n de educaci√≥n superior p√∫blicas u otras fuentes o conceptos.</li>
          </ul>
        </div>

        <!-- Lo que no incluye -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">EL BENEFICIO NO INCLUYE</h4>
          <ul class="ml-4 space-y-1">
            <li>- El pago de derechos pecuniarios por cursos intersemestrales.</li>
            <li>- Derechos de grado.</li>
            <li>- Cobros complementarios (derechos complementarios).</li>
            <li>- Extraordinarios.</li>
            <li>- Extempor√°neos.</li>
            <li>- Administrativos (Fortalecimiento a la conectividad).</li>
            <li>- Ning√∫n otro derecho pecuniario o concepto que no est√© expl√≠citamente contemplado en el Reglamento Operativo vigente.</li>
          </ul>
        </div>

        <!-- Duraci√≥n -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">¬øCU√ÅNTO DURA EL BENEFICIO?</h4>
          <p class="mb-3">El beneficio cubre el total de la duraci√≥n de un programa acad√©mico de acuerdo al registro calificado registrado en SNIES.</p>
          <p>Con el fin de promover la permanencia y graduaci√≥n, la Pol√≠tica de Gratuidad en la Matricula cubrir√° por rezago acad√©mico u otras figuras asociadas a la finalizaci√≥n del plan de estudios del programa, hasta un (1) periodo acad√©mico adicional para formaci√≥n t√©cnica y tecnol√≥gica y hasta dos (2) periodos acad√©micos adicionales para formaci√≥n profesional a los establecidos. Los periodos de rezago solo se asignar√°n a estudiantes que se les haya asignado el beneficio.</p>
        </div>

        <!-- Causales de terminaci√≥n -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">CAUSALES DE TERMINACI√ìN DEL BENEFICIO DE LA POL√çTICA DE GRATUIDAD EN LA MATR√çCULA</h4>
          <ol class="space-y-2 pl-4">
            <li><strong>1.</strong> Por cumplimiento de la duraci√≥n del beneficio seg√∫n el Reglamento Operativo vigente.</li>
            <li><strong>2.</strong> Cuando el beneficiario(a) haya accedido a la Pol√≠tica de Gratuidad en la Matr√≠cula con informaci√≥n no veraz, o con documentos adulterados.</li>
            <li><strong>3.</strong> Cuando pierda la condici√≥n de estudiante de acuerdo con los reglamentos internos de las IES, la cual deber√° informarlo al Ministerio de Educaci√≥n Nacional a trav√©s de la plantilla de caracterizaci√≥n.</li>
            <li><strong>4.</strong> Obtener un t√≠tulo de profesional universitario.</li>
            <li><strong>5.</strong> Por fallecimiento del estudiante.</li>
          </ol>
          
          <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mt-4">
            <p class="font-usco-bold mb-2">Nota 1</p>
            <p class="mb-2">Si el estudiante recibe un t√≠tulo de pregrado en el Nivel profesional, perder√° el beneficio autom√°ticamente, as√≠ mismo, si el estudiante realiza cambio de IES, el beneficio no seguir√° en la Universidad Surcolombiana.</p>
            
            <p class="font-usco-bold mb-2">Nota 2</p>
            <p>Es de aclarar que los estudiantes podr√°n aplazar sus estudios sin que esto afecte la continuidad del beneficio de la Pol√≠tica de Gratuidad en la Matr√≠cula, siempre que conserven la condici√≥n de estudiante conforme a los reglamentos de las IES p√∫blicas respectivas.</p>
          </div>
        </div>

        <!-- Cambios de programa -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">CAMBIOS DE PROGRAMA O IES</h4>
          <p class="mb-3">Los beneficiarios de la Pol√≠tica de Gratuidad en la Matr√≠cula podr√°n cambiar de IES y/o programa acad√©mico atendiendo a las disposiciones que en dicha materia contemplen las IES, sin que esto afecte la continuidad del beneficio.</p>
          <p class="mb-3">Para que el cambio de programa o de IES se efect√∫e, el estudiante debe informar por escrito a ambas IES la intenci√≥n de cambiar el beneficio y dejar claro en que IES quiere que se aplique el beneficio.</p>
          <p class="mb-3">La IES a la cual cambi√≥ o desea cambiar deber√° reportarlo como matriculado en el SNIES. Cada cambio que realice el estudiante acumular√° los periodos ya financiados. En este sentido, a los periodos acad√©micos a financiar, una vez el estudiante realice el cambio, se le descontar√° los periodos acad√©micos ya financiados.</p>
          <p class="mb-2">Frente al cambio de programa de pregrado en un nivel de formaci√≥n diferente al financiado inicialmente, se tendr√°n en cuenta las siguientes situaciones:</p>
          <ol class="space-y-2 pl-4">
            <li><strong>1.</strong> Si el cambio se realiza a un programa con mayor n√∫mero de periodos acad√©micos, se habilitar√°n los periodos adicionales de acuerdo con lo establecido en el registro calificado del nuevo programa.</li>
            <li><strong>2.</strong> Si el cambio se realiza a un programa con menor n√∫mero de periodos acad√©micos, se disminuir√°n los periodos aprobados inicialmente en funci√≥n del registro calificado del nuevo programa.</li>
          </ol>
          <p class="mt-2">En cualquier caso, los cambios de IES o programas solo podr√°n realizarse entre IES p√∫blicas.</p>
        </div>

        <!-- C√≥mo acceder -->
        <div>
          <h4 class="font-usco-bold text-usco-vino text-lg mb-3">¬øC√ìMO ACCEDER AL BENEFICIO?</h4>
          <p class="mb-2">El paso a paso es muy sencillo:</p>
          <ul class="ml-4 space-y-2">
            <li>‚Ä¢ El estudiante debe dirigirse a una de las 67 Instituciones de Educaci√≥n Superior p√∫blicas del pa√≠s, elegir un programa acad√©mico de pregrado (t√©cnico profesional, tecnol√≥gico o universitario), ser admitido por la instituci√≥n y matricularse.</li>
            <li>‚Ä¢ La Instituci√≥n se encargar√° de registrar al estudiante en el Sistema Nacional de Informaci√≥n de Educaci√≥n Superior-SNIES.</li>
          </ul>
          
          <div class="bg-red-50 border-l-4 border-red-400 p-4 mt-4">
            <p class="font-usco-bold mb-2">Nota 3</p>
            <p>En caso que el estudiante resulte excluido de la verificaci√≥n que realiza el Ministerio de Educaci√≥n por alguna de las causales y este no desembolse los pagos de la matr√≠cula ordinaria neta, la IES realizar√° el cobro de este valor a los estudiantes quienes deber√°n asumir los valores cobrados por la IES. La Universidad Surcolombiana advierte de esta situaci√≥n al momento de descargar el comprobante de pago.</p>
          </div>
        </div>

        <!-- M√°s informaci√≥n -->
        <div class="bg-usco-gris-pale border border-usco-gris-lighter rounded p-4">
          <p class="font-usco-bold text-usco-vino mb-2">M√ÅS INFORMACI√ìN EN</p>
          <a href="https://www.usco.edu.co/documento/486161" target="_blank" class="text-blue-600 underline hover:text-blue-800">
            https://www.usco.edu.co/documento/486161
          </a>
        </div>
        
      </div>
    </div>
    
    <!-- Footer -->
    <div class="bg-usco-gris-pale px-6 py-4 flex justify-end border-t border-usco-gris-lightest flex-shrink-0">
      <button 
        (click)="hideGratuidadDialog()"
        class="bg-usco-ocre hover:bg-usco-ocre-dark text-black px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold btn-cerrar-animated"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<router-outlet />
