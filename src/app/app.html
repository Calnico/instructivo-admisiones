<!-- Header banner con logo de la universidad -->
<img 
  src="images/usco.svg" 
  alt="Universidad Surcolombiana" 
  class="w-full h-auto"
  onerror="this.style.display='none'; this.nextElementSibling.style.display='block'"
/>
<div style="display:none; color:red; font-weight:bold; padding: 10px;">LOGO NO CARGA - USCO</div>

<!-- Botones principales -->
<section class="py-8">
  <div class="container mx-auto px-4">
    <p class="text-center text-usco-gris text-lg font-usco mb-6">
      <strong>Bienvenido(a) apreciado(a) aspirante a la Universidad Surcolombiana, <br>reciba un cordial saludo.</strong>
    </p>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-6xl mx-auto">
      <a href="https://usco.edu.co/inscripciones-2025-2/documentos/ACUERDO-CA-004-DE-2025-CONSEJO-ACADEMICO.pdf" target="_blank" class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl text-center block">
        Acuerdo CA N√∫mero 004 del 25 de Marzo de 2025
      </a>
      <button (click)="showTermsDialog()" class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl text-center cursor-pointer">
        T√©rminos de Referencia Legal del Proceso de Admisiones
      </button>
      <a href="https://www.usco.edu.co/es/faq/admisiones/" target="_blank" class="bg-gray-700 hover:bg-gray-800 text-white font-usco-bold py-4 px-6 rounded-lg transform transition-all duration-300 hover:scale-105 hover:shadow-2xl flex items-center justify-center">
        Preguntas Frecuentes
      </a>
    </div>
    
    <!-- Cuadro de Pol√≠tica de Gratuidad -->
    <div class="max-w-6xl mx-auto mt-8">
      <div class="bg-usco-gris-pale border border-usco-gris-lighter rounded-lg p-6">
        <h3 class="text-lg font-usco-condensed-bold text-usco-vino mb-3">
          POL√çTICA DE GRATUIDAD EN LA MATR√çCULA
        </h3>
        <p class="text-usco-gris-dark font-usco">
          La Pol√≠tica de Gratuidad se aplica conforme el Reglamento Operativo comunicado por el Ministerio de Educaci√≥n Nacional, el cual puede consultar en el siguiente <a href="https://www.usco.edu.co/documento/416416" target="_blank" class="text-usco-vino font-usco-bold underline hover:text-usco-vino-dark">Link</a>
        </p>
      </div>
    </div>
  </div>
</section>


<!-- Banner principal tipo bot√≥n -->
<section class="container mx-auto px-4 py-8">
  <div class="max-w-5xl mx-auto">
    <div class="rounded-3xl shadow-xl">
      <img 
        src="images/banner-principal.png" 
        alt="Banner Principal - Proceso de Matr√≠cula"
        class="w-full h-auto rounded-3xl object-cover"
        style="height: auto;"
      />
    </div>
  </div>
</section>

<!-- Pasos de matr√≠cula -->
<main class="container mx-auto px-4 py-12">
  <div class="max-w-4xl mx-auto">
    <div class="relative">
      <div *ngFor="let step of steps; let isLast = last; let isFirst = first" class="relative">
        <!-- L√≠nea vertical conectora para cada paso (excepto el √∫ltimo) -->
        <div *ngIf="!isLast" class="absolute left-6 w-0.5 bg-usco-ocre-dark" 
             style="top: 48px; height: calc(100% + 32px);"></div>
        <!-- Estructura uniforme para todos los pasos -->
        <div class="flex items-center mb-8">
          <!-- N√∫mero fuera del banner -->
          <div class="w-12 h-12 text-white rounded-full flex items-center justify-center font-bold text-lg mr-8 flex-shrink-0 relative z-10 bg-usco-vino">
            {{ step.number }}
          </div>
          
          <!-- Banner para todos los pasos con imagen -->
          <div class="rounded-3xl shadow-xl cursor-pointer transform transition-all duration-300 hover:scale-105 hover:shadow-2xl"
            style="width: calc(100% - 80px);"
            (click)="showDialog(step)"
          >
            <img 
              [src]="'images/paso-' + step.number + '.png'" 
              [alt]="step.title"
              class="w-full h-auto rounded-3xl object-cover"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Modal personalizado con TailwindCSS -->
<div *ngIf="visible()" class="fixed inset-0 z-50 flex items-center justify-center" [ngClass]="closing() ? 'animate-fadeOut' : 'animate-fadeIn'">
  <!-- Fondo opacado -->
  <div class="modal-overlay" [ngClass]="closing() ? 'animate-fadeOut' : 'animate-fadeIn'" (click)="hideDialog()"></div>
  
  <!-- Modal -->
  <div class="relative bg-white rounded-lg shadow-xl w-[95vw] max-w-[1700px] h-[90vh] flex flex-col" [ngClass]="closing() ? 'animate-scaleOut' : 'animate-scaleIn'">
    <!-- Header -->
    <div class="bg-usco-vino text-white px-6 py-4">
      <h3 class="text-lg font-usco-condensed-bold">
        Paso {{ selectedStep()?.number || '' }}: {{ selectedStep()?.title || '' }}
      </h3>
    </div>
    
    <!-- Contenido -->
    <div class="overflow-y-auto flex-1" *ngIf="selectedStep()">
      <!-- Solo mostrar PDFs para el paso 1 -->
      <div *ngIf="selectedStep()!.number === 1 && selectedStep()!.pdfs && selectedStep()!.pdfs!.length > 0" class="p-4">
        <!-- Listado horizontal de sedes -->
        <div class="mb-6">
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <button 
              *ngFor="let pdf of selectedStep()!.pdfs!; let i = index"
              (click)="selectPdf(i, pdf.url)"
              class="sede-button p-4 rounded-lg border-2 transition-all duration-200 hover:scale-105"
              [ngClass]="selectedPdfIndex() === i ? 
                'bg-usco-vino text-white border-usco-vino shadow-lg' : 
                'bg-white text-usco-gris border-usco-gris-lighter'">
              <div class="text-center">
                <div class="font-usco-bold text-sm">{{ pdf.name }}</div>
              </div>
            </button>
          </div>
        </div>
        
        <!-- Contenido del PDF -->
        <div *ngIf="selectedStep()!.pdfs && selectedStep()!.pdfs![selectedPdfIndex()]" class="bg-white">
          <div *ngIf="!isBrowser()" class="flex items-center justify-center h-[400px] bg-gray-100 rounded">
            <p class="text-usco-gris">Cargando visor PDF...</p>
          </div>
          
          <div *ngIf="isBrowser()">
            <!-- Visor PDF con embed simple (como en PHP) -->
            <div class="border rounded bg-white p-4">
              <!-- Embed PDF directo -->
              <embed 
                [src]="safePdfUrl()" 
                width="98%" 
                height="630" 
                type="application/pdf"
                class="rounded border" />
            </div>
          </div>
        </div>
      </div>
      
      <!-- Para otros pasos, mostrar contenido normal -->
      <div *ngIf="selectedStep()!.number !== 1" class="p-6">
        <!-- Descripci√≥n detallada -->
        <div *ngIf="selectedStep()!.detailedInfo" class="mb-6">
          <h4 class="text-lg font-usco-condensed-bold mb-3 text-usco-vino">Informaci√≥n detallada</h4>
          <p class="text-usco-gris-dark leading-relaxed font-usco">{{ selectedStep()!.detailedInfo }}</p>
        </div>

        <!-- Requisitos -->
        <div *ngIf="selectedStep()!.requirements && selectedStep()!.requirements!.length > 0" class="mb-6">
          <h4 class="text-lg font-usco-condensed-bold mb-3 text-usco-vino">Requisitos necesarios</h4>
          <ul class="space-y-2">
            <li *ngFor="let requirement of selectedStep()!.requirements!" class="flex items-start">
              <span class="text-usco-ocre-dark mr-2 text-lg">‚úì</span>
              <span class="text-usco-gris-dark font-usco">{{ requirement }}</span>
            </li>
          </ul>
        </div>

        <!-- Consejos -->
        <div *ngIf="selectedStep()!.tips && selectedStep()!.tips!.length > 0" class="mb-4">
          <h4 class="text-lg font-usco-condensed-bold mb-3 text-usco-vino">Consejos √∫tiles</h4>
          <ul class="space-y-2">
            <li *ngFor="let tip of selectedStep()!.tips!" class="flex items-start">
              <span class="text-usco-ocre-dark mr-2 text-lg">üí°</span>
              <span class="text-usco-gris-dark font-usco">{{ tip }}</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="bg-usco-gris-pale px-6 py-4 flex justify-between items-center border-t border-usco-gris-lightest flex-shrink-0">
      <a *ngIf="selectedStep()?.number === 1 && selectedStep()?.pdfs && selectedStep()?.pdfs![selectedPdfIndex()]" 
         [href]="selectedStep()!.pdfs![selectedPdfIndex()].url" 
         target="_blank" 
         class="bg-usco-vino hover:bg-usco-vino-dark text-white px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold">
        Ver PDF de {{ selectedStep()!.pdfs![selectedPdfIndex()].name }}
      </a>
      <div *ngIf="selectedStep()?.number !== 1"></div>
      <button 
        (click)="hideDialog()"
        class="bg-usco-gris hover:bg-usco-gris-dark text-white px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<!-- Modal para T√©rminos de Referencia Legal -->
<div *ngIf="visibleTerms()" class="fixed inset-0 z-50 flex items-center justify-center" [ngClass]="closingTerms() ? 'animate-fadeOut' : 'animate-fadeIn'">
  <!-- Fondo opacado -->
  <div class="modal-overlay" [ngClass]="closingTerms() ? 'animate-fadeOut' : 'animate-fadeIn'" (click)="hideTermsDialog()"></div>
  
  <!-- Modal -->
  <div class="relative bg-white rounded-lg shadow-xl w-[95vw] max-w-[1200px] h-[90vh] flex flex-col" [ngClass]="closingTerms() ? 'animate-scaleOut' : 'animate-scaleIn'">
    <!-- Header -->
    <div class="bg-usco-vino text-white px-6 py-4">
      <h3 class="text-lg font-usco-condensed-bold">
        T√©rminos de Referencia Legal del Proceso de Admisiones
      </h3>
    </div>
    
    <!-- Contenido -->
    <div class="overflow-y-auto flex-1 p-6">
      
      <div class="space-y-4 text-usco-gris-dark font-usco leading-relaxed">
        <p class="font-usco-bold text-usco-vino">
          S√≥lo se aceptan las pruebas de Estado (ICFES o Saber 11) con diez (10) a√±os de vigencia, es decir, a partir del a√±o 2016.
        </p>
        <p>
          ‚Ä¢ En su calidad de aspirante a ingresar a la Universidad Surcolombiana, asume la responsabilidad legal de leer completamente para conocer el Reglamento de Inscripci√≥n, Admisi√≥n y Matr√≠cula - Acuerdo N√∫mero 003 del 12 de abril de 2016 expedido por el Consejo Acad√©mico, normatividad que fija las condiciones, requisitos y dem√°s normas y disposiciones internas que establece la Universidad Surcolombiana para el proceso de admisi√≥n a los Programas Acad√©micos de Pregrado que ofrece. En consecuencia, es su absoluta responsabilidad atender todo el contenido del presente INSTRUCTIVO GU√çA PASO A PASO.
        </p>
        
        <p>
          ‚Ä¢ En su calidad de aspirante, asume la responsabilidad de ingresar toda la informaci√≥n solicitada, la cual debe ser completa, exacta, ver√≠dica y bajo la gravedad de juramento; por lo tanto, no habr√° lugar a solicitar a la Universidad modificaciones o correcciones.
        </p>
        
        <p>
          ‚Ä¢ Es de indicar que, la Universidad Surcolombiana ha implementado la virtualidad para el proceso de la matr√≠cula financiera y acad√©mica; ante lo cual, si usted adquiere la calidad de admitido(a) tiene la absoluta responsabilidad de cargar la documentaci√≥n reglamentaria a trav√©s de la plataforma tecnol√≥gica dispuesta para tal fin, en las fechas establecidas en cada uno de los llamados. En el numeral 9 de este Instructivo Gu√≠a Paso a Paso se indica la documentaci√≥n que debe tener lista a cargar cuando sea admitido(a). De no cumplir con los requisitos y documentaci√≥n exigida para la matr√≠cula financiera y acad√©mica, perder√° el cupo.
        </p>
        
        <p>
          Aspirante, para la Universidad Surcolombiana es grato que desee ser parte de la comunidad universitaria; por ello, es indispensable que lea la totalidad de la informaci√≥n que se ha publicado para usted. Realice la completa lectura de los nueve (9) pasos de este INSTRUCTIVO GU√çA y en consecuencia tenga la suficiente claridad del proceso de inscripci√≥n, admisi√≥n y matr√≠cula.
        </p>
        
      </div>
    </div>
    
    <!-- Footer -->
    <div class="bg-usco-gris-pale px-6 py-4 flex justify-end border-t border-usco-gris-lightest flex-shrink-0">
      <button 
        (click)="hideTermsDialog()"
        class="bg-usco-gris hover:bg-usco-gris-dark text-white px-4 py-2 rounded-md transition-colors duration-200 font-usco-bold"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<router-outlet />
